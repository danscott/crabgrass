<% if may_see_members? -%>
  <%- cache(group_cache_key(@group, :what => 'members', :expires_in => hours(3))) do -%>
  <%= render :partial => 'avatars/entity_boxes',
      :locals => {:header => 'members'[:members], :entities => @group.users,
      :more_link => link_to("{count} members"[:group_membership_count, {:count=>(@group.users.size).to_s}] + ARROW, list_membership_url),
      :after => link_line(:bullet, list_membership_link, invite_link, requests_link),
      :show_empty => true } %>
  <%= render :partial => 'avatars/entity_boxes',
      :locals => {:header => 'member groups'[:member_groups_of_network], :entities => @group.groups.select{ |g| may_see_members_of? g },
      :after => link_line(:bullet, list_membership_link, invite_link, requests_link) } %>
  <% end -%>
<% end -%>

<%- if may_see_networks? -%>
  <%- cache(group_cache_key(@group, :what => 'networks')) do -%>
    <%- if @group.networks.any? -%>
      <%= render :partial => 'avatars/entity_boxes', :locals => {:header => "networks"[:networks], :entities => @group.networks, :after => '&nbsp'} %>
    <%- end -%>
  <%- end -%>
<%- end %>

<% if may_see_committees? -%>
  <%- cache(group_cache_key(@group, :what => 'committees')) do -%>
    <%= render :partial => 'avatars/entity_boxes', :locals => {:header => "committees"[:committees], :entities => @group.committees, :after => link_line(create_committee_link), :show_empty => true} %>
  <%- end -%>
<%- end %>

